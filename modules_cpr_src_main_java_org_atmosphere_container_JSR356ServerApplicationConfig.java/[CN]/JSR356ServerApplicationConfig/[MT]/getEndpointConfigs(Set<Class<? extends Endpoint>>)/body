{
  logger.debug("{} detected by the WebServer",JSR356ServerApplicationConfig.class.getName());
  return new HashSet<ServerEndpointConfig>(){
{
      add(ServerEndpointConfig.Builder.create(JSR356Endpoint.class,"/{path}").configurator(new ServerEndpointConfig.Configurator(){
        public <T>T getEndpointInstance(        java.lang.Class<T> endpointClass) throws java.lang.InstantiationException {
          if (JSR356Endpoint.class.isAssignableFrom(endpointClass)) {
            AtmosphereConfig config=BroadcasterFactory.getDefault().lookup("/*",true).getBroadcasterConfig().getAtmosphereConfig();
            AtmosphereFramework f=config.framework();
            return (T)new JSR356Endpoint(f,WebSocketProcessorFactory.getDefault().getWebSocketProcessor(f));
          }
 else {
            return super.getEndpointInstance(endpointClass);
          }
        }
      }
).build());
    }
  }
;
}
