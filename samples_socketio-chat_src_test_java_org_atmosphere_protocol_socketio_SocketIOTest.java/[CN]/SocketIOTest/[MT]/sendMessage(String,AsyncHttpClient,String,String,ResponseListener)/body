{
  log.debug(name + " HXR-Polling Sending message = " + message);
  Thread t=new Thread(){
    public void run(){
      try {
        client.preparePost(url).setBody(message).execute(new AsyncCompletionHandlerAdapter(){
          @Override public com.ning.http.client.AsyncHandler.STATE onBodyPartReceived(          HttpResponseBodyPart content) throws Exception {
            try {
              String body=new String(content.getBodyPartBytes());
              System.err.println("sendMessage Name = " + name + " onBodyPartReceived="+ body);
              if (listener != null) {
                listener.notify(body);
              }
            }
  finally {
            }
            return super.onBodyPartReceived(content);
          }
          @Override public Response onCompleted(          Response response) throws Exception {
            try {
              String body=response.getResponseBody();
              System.err.println("sendMessage Name = " + name + " Body="+ body);
              if (listener != null) {
                listener.notify(body);
              }
            }
  finally {
            }
            return response;
          }
        }
).get();
      }
 catch (      InterruptedException e1) {
      }
catch (      Exception e) {
        e.printStackTrace();
        Assert.fail();
      }
    }
  }
;
  t.start();
}
