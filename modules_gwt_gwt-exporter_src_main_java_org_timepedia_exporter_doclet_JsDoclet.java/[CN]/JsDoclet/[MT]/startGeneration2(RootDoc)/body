{
  configuration=ConfigurationImpl.getInstance();
  configuration.root=root;
  if (root.classes().length == 0) {
    configuration.message.error("doclet.No_Public_Classes_To_Document");
    return false;
  }
  configuration.setOptions();
  configuration.getDocletSpecificMsg().notice("doclet.build_version",configuration.getDocletSpecificBuildDate());
  ClassTree classtree=new ClassTree(configuration,configuration.nodeprecated);
  generateClassFiles(root,classtree);
  if (configuration.sourcepath != null && configuration.sourcepath.length() > 0) {
    StringTokenizer pathTokens=new StringTokenizer(configuration.sourcepath,String.valueOf(File.pathSeparatorChar));
    boolean first=true;
    while (pathTokens.hasMoreTokens()) {
      Util.copyDocFiles(configuration,pathTokens.nextToken() + File.separator,DocletConstants.DOC_FILES_DIR_NAME,first);
      first=false;
    }
  }
  PackageListWriter.generate(configuration);
  generatePackageFiles(classtree);
  generateOtherFiles(root,classtree);
  configuration.tagletManager.printReport();
  return true;
}
