{
  if (windowBits < 9 || windowBits > 15)   throw new IllegalArgumentException("invalid LZ77 window bit length: " + windowBits);
  int bufferLen=16384;
  int windowLen=1 << windowBits;
  window=new int[windowLen];
  windowLink=new char[windowLen];
  hashTable=new char[windowLen];
  maxDistanceTriplet=windowLen - 261;
  maxDistanceSeq1=windowLen - 261;
  maxDistanceSeq2=windowLen - 261;
  if (level == 0)   level=MEDIUM;
switch (level) {
case SPEED:
    maxChainLengthTriplet=16;
  maxChainLengthSeq1=8;
goodSequenceLength=8;
maxLazyLength=4;
maxChainLengthSeq2=4;
break;
case MEDIUM:
maxChainLengthTriplet=128;
maxChainLengthSeq1=128;
goodSequenceLength=64;
maxLazyLength=64;
maxChainLengthSeq2=32;
break;
case COMPACT:
maxChainLengthTriplet=1024;
maxChainLengthSeq1=1024;
goodSequenceLength=258;
maxLazyLength=258;
maxChainLengthSeq2=1024;
break;
case HUFF:
huffOnly=true;
break;
default :
throw new IllegalArgumentException("unknown compression level: " + level);
}
buffer=new int[bufferLen];
ucBuffer=new byte[4 * bufferLen + 258];
outBuf=new byte[4096];
}
