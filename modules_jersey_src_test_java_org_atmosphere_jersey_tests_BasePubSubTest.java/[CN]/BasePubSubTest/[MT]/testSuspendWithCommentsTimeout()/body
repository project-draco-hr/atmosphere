{
  logger.info("{}: running test: testSuspendWithCommentsTimeout",getClass().getSimpleName());
  AsyncHttpClient c=new AsyncHttpClient();
  try {
    Response r=c.prepareGet(urlTarget + "/withComments").execute().get(10,TimeUnit.SECONDS);
    assertNotNull(r);
    assertEquals(r.getStatusCode(),200);
    String resume=r.getResponseBody();
    String[] ct=r.getContentType().toLowerCase().split(";");
    assertEquals(ct[0].trim(),"text/plain");
    assertEquals(ct[1].trim(),"charset=iso-8859-1");
    assertEquals(resume,AtmosphereResourceImpl.createCompatibleStringJunk());
  }
 catch (  Exception e) {
    logger.error("test failed",e);
    fail(e.getMessage());
  }
  c.close();
}
