{
  r.addEventListener(new AtmosphereResourceEventListenerAdapter(){
    @Override public void onSuspend(    AtmosphereResourceEvent event){
      logger.info("User {} connected.",r.uuid());
    }
    @Override public void onDisconnect(    AtmosphereResourceEvent event){
      if (event.isCancelled()) {
        logger.info("User {} unexpectedly disconnected",r.uuid());
      }
 else       if (event.isClosedByClient()) {
        logger.info("User {} closed the connection",r.uuid());
      }
    }
  }
);
}
