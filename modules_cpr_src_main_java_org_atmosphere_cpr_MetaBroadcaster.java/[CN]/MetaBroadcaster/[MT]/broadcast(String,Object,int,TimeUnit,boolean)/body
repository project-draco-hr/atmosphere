{
  if (BroadcasterFactory.getDefault() != null) {
    Collection<Broadcaster> c=BroadcasterFactory.getDefault().lookupAll();
    final Map<String,String> m=new HashMap<String,String>();
    List<Broadcaster> l=new ArrayList<Broadcaster>();
    logger.trace("Map {}",path);
    UriTemplate t=new UriTemplate(path);
    for (    Broadcaster b : c) {
      logger.trace("Trying to map {} to {}",t,b.getID());
      if (t.match(b.getID(),m)) {
        l.add(b);
      }
      m.clear();
    }
    if (l.isEmpty()) {
      logger.warn("No Broadcaster match {}. Message {} WILL BE LOST. Make sure you cache it or make sure the Broadcaster exists before.",path,message);
      return E;
    }
    MetaBroadcasterFuture f=new MetaBroadcasterFuture(l);
    CompleteListener cl=new CompleteListener(f);
    for (    Broadcaster b : l) {
      if (time <= 0) {
        f.outerFuture(b.addBroadcasterListener(cl).broadcast(message));
      }
 else       if (!delay) {
        f.outerFuture(b.scheduleFixedBroadcast(message,time,unit));
      }
 else {
        f.outerFuture(b.delayBroadcast(message,time,unit));
      }
    }
    return f;
  }
 else {
    return E;
  }
}
