{
  if (BroadcasterFactory.getDefault() != null) {
    Collection<Broadcaster> c=BroadcasterFactory.getDefault().lookupAll();
    final Map<String,String> m=new HashMap<String,String>();
    List<Broadcaster> l=new ArrayList<Broadcaster>();
    logger.debug("Map {}",path);
    UriTemplate t=new UriTemplate(path);
    for (    Broadcaster b : c) {
      logger.debug("Trying to map {} to {}",t,b.getID());
      if (t.match(b.getID(),m)) {
        l.add(b);
      }
      m.clear();
    }
    MetaBroadcasterFuture f=new MetaBroadcasterFuture(l);
    CompleteListener cl=new CompleteListener(f);
    for (    Broadcaster b : l) {
      if (time <= 0) {
        b.addBroadcasterListener(cl).broadcast(message);
      }
 else       if (!delay) {
        b.scheduleFixedBroadcast(message,time,unit);
      }
 else {
        b.delayBroadcast(message,time,unit);
      }
    }
    return f;
  }
 else {
    return new MetaBroadcasterFuture(Collections.<Broadcaster>emptyList());
  }
}
