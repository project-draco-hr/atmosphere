{
  final AtomicReference<AtmosphereRequestImpl.Body> e=new AtomicReference<AtmosphereRequestImpl.Body>();
  framework.addAtmosphereHandler("/a",new AbstractReflectorAtmosphereHandler(){
    @Override public void onRequest(    AtmosphereResource resource) throws IOException {
      e.set(resource.getRequest().body());
    }
    @Override public void destroy(){
    }
  }
);
  AtmosphereRequest request=new AtmosphereRequestImpl.Builder().pathInfo("/a").body("test").build();
  framework.doCometSupport(request,AtmosphereResponse.newInstance().delegateToNativeResponse(false));
  assertNotNull(e.get());
  assertTrue(e.get().hasString());
  assertFalse(e.get().hasBytes());
  assertEquals(e.get().asString(),"test");
}
