{
  AtmosphereRequest request=new AtmosphereRequestImpl.Builder().pathInfo("/a").body("test".getBytes()).build();
  assertEquals(request.getContentType(),"text/plain");
  request=new AtmosphereRequestImpl.Builder().pathInfo("/a").build();
  assertNull(request.getContentType());
  AtmosphereResource resource=Mockito.mock(AtmosphereResource.class);
  AtmosphereConfig config=Mockito.mock(AtmosphereConfig.class);
  when(config.getInitParameter(ApplicationConfig.FORCE_CONTENT_TYPE)).thenReturn("true");
  when(resource.getAtmosphereConfig()).thenReturn(config);
  request.setAttribute(FrameworkConfig.ATMOSPHERE_RESOURCE,resource);
  assertEquals(request.getContentType(),"text/plain");
}
