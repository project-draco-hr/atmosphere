{
  if (!connection.isOpen())   throw new IOException("Connection closed");
  connection.sendMessage(data);
}
