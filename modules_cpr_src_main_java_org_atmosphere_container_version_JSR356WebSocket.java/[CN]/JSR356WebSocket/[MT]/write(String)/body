{
  try {
    semaphore.acquireUninterruptibly();
    session.getAsyncRemote().sendText(s,new WriteResult(resource(),s));
  }
 catch (  NullPointerException e) {
    patchGlassFish(e);
  }
 finally {
    semaphore.release();
  }
  return this;
}
