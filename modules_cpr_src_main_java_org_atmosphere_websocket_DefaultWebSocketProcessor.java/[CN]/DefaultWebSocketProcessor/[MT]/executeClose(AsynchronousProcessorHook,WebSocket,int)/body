{
  boolean isClosedByClient=webSocket.resource() == null ? true : webSocket.resource().getAtmosphereResourceEvent().isClosedByClient();
  try {
    h.closed();
  }
  finally {
    if (!isClosedByClient) {
      notifyListener(webSocket,new WebSocketEventListener.WebSocketEvent(closeCode,CLOSE,webSocket));
    }
  }
}
