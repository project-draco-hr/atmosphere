{
  super.onClose(socket,frame);
  LOGGER.trace("onClose {} ",socket);
  G2WebSocket g2w=G2WebSocket.class.cast(socket);
  org.atmosphere.websocket.WebSocket webSocket=(org.atmosphere.websocket.WebSocket)g2w.getRequest().getAttribute("grizzly.webSocket");
  if (webSocket != null) {
    webSocketProcessor.close(webSocket,1000);
  }
}
