{
  super.onClose(socket,frame);
  LOGGER.trace("onClose {} ",socket);
  G2WebSocket webSocket=G2WebSocket.class.cast(socket);
  if (webSocket.getRequest().getAttribute("grizzly.webSocketProcessor") != null) {
    WebSocketProcessor webSocketProcessor=(WebSocketProcessor)webSocket.getRequest().getAttribute("grizzly.webSocketProcessor");
    webSocketProcessor.close(1000);
  }
}
