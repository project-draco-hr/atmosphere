{
  AtmosphereResponse response=event.getResource().getResponse();
  if (event.isSuspended()) {
    onMessage(response,(T)event.getMessage());
  }
 else   if (event.isResuming()) {
    onResume(response);
  }
 else   if (event.isResumedOnTimeout()) {
    onTimeout(response);
  }
 else   if (event.isCancelled()) {
    onDisconnect(response);
  }
  postStateChange(event);
}
