{
  if (r == null) {
    throw new IllegalArgumentException("AtmosphereResource can't be null");
  }
  AtmosphereRequest request=r.getRequest();
  String cacheHeader=request.getHeader(X_CACHE_DATE);
  r.getResponse().setHeader(X_CACHE_DATE,String.valueOf(System.nanoTime()));
  if (cacheHeader == null || cacheHeader.isEmpty()) {
    return Collections.emptyList();
  }
  long cacheHeaderTime=0;
  if (!cacheHeader.isEmpty()) {
    cacheHeaderTime=Long.valueOf(cacheHeader);
  }
  return get(cacheHeaderTime);
}
