{
  List<SocketIOPacketImpl> messages=new ArrayList<SocketIOPacketImpl>();
  if (data == null || data.length() == 0) {
    return messages;
  }
  try {
    if (data.charAt(0) == SocketIOPacketImpl.SOCKETIO_MSG_DELIMITER) {
      int size=data.length();
      int previousDelimiterIndex=1;
      int nextDelimiterIndex=-1;
      for (int i=1; i < size; i++) {
        for (; i < size; i++) {
          if (data.charAt(i) == SocketIOPacketImpl.SOCKETIO_MSG_DELIMITER) {
            nextDelimiterIndex=i;
            break;
          }
        }
        if (nextDelimiterIndex > previousDelimiterIndex) {
          int length=Integer.parseInt(data.substring(previousDelimiterIndex,nextDelimiterIndex));
          i=++nextDelimiterIndex + length;
          previousDelimiterIndex=i + 1;
          SocketIOPacketImpl msg=parse2(data.substring(nextDelimiterIndex,i));
          if (msg != null) {
            messages.add(msg);
          }
        }
      }
    }
 else {
      SocketIOPacketImpl msg=parse2(data);
      if (msg != null) {
        messages.add(msg);
      }
    }
    return messages;
  }
 catch (  Exception e) {
    throw new SocketIOException("Invalid message=" + data,e);
  }
}
