{
  Broadcaster b=getBroadcaster(id);
  if (b != null && b.getScope() == Broadcaster.SCOPE.REQUEST) {
    throw new IllegalStateException("Broadcaster " + b + " cannot be looked up as its scope is REQUEST");
  }
  if (b != null && !c.isAssignableFrom(b.getClass())) {
    String em="Invalid lookup class " + c.getName() + ". Cached class is: "+ b.getClass().getName();
    if (LoggerUtils.getLogger().isLoggable(Level.FINE)) {
      LoggerUtils.getLogger().log(Level.FINE,em);
    }
    throw new IllegalStateException(em);
  }
  if (b == null && createIfNull) {
    try {
      b=get(c,id);
    }
 catch (    IllegalAccessException e) {
      throw new IllegalStateException(e);
    }
catch (    InstantiationException e) {
      throw new IllegalStateException(e);
    }
  }
  return b;
}
