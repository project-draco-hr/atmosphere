{
  try {
    Broadcaster b=c.getConstructor(String.class,AtmosphereConfig.class).newInstance(id.toString(),config);
    InjectorProvider.getInjector().inject(b);
    if (b.getBroadcasterConfig() == null) {
      b.setBroadcasterConfig(new BroadcasterConfig(config.framework().broadcasterFilters,config));
    }
    b.setBroadcasterLifeCyclePolicy(policy);
    if (DefaultBroadcaster.class.isAssignableFrom(clazz)) {
      DefaultBroadcaster.class.cast(b).start();
    }
    for (    BroadcasterListener l : broadcasterListeners) {
      b.addBroadcasterListener(l);
    }
    notifyOnPostCreate(b);
    return b;
  }
 catch (  Throwable t) {
    throw new BroadcasterCreationException(t);
  }
}
