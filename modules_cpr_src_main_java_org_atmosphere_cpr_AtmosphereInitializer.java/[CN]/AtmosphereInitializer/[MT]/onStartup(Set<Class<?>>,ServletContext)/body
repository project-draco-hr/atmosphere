{
  logger.trace("Initializing AtmosphereFramework");
  framework=(AtmosphereFramework)c.getAttribute(AtmosphereFramework.class.getName());
  if (framework == null) {
    framework=new AtmosphereFramework(false,true);
    DefaultAsyncSupportResolver resolver=new DefaultAsyncSupportResolver(framework.getAtmosphereConfig());
    if (resolver.testClassExists(DefaultAsyncSupportResolver.JSR356_WEBSOCKET)) {
      framework.setAsyncSupport(new JSR356AsyncSupport(framework.getAtmosphereConfig()));
    }
    c.setAttribute(AtmosphereFramework.class.getName(),framework);
  }
}
