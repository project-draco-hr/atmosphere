{
  if (messages != null) {
    for (    SocketIOPacketImpl msg : messages) {
switch (msg.getFrameType()) {
case MESSAGE:
case JSON:
case EVENT:
case ACK:
case ERROR:
        msg.setPadding(messages.size() > 1);
      try {
        sendMessage(msg.toString());
      }
 catch (      Exception e) {
        AtmosphereResourceImpl resource=session.getAtmosphereResourceImpl();
        if (resource != null && DefaultBroadcaster.class.isAssignableFrom(resource.getBroadcaster().getClass())) {
          resource.getBroadcaster().getBroadcasterConfig().getBroadcasterCache().addToCache(resource.getBroadcaster().getID(),resource,new BroadcasterCache.Message(msg));
        }
      }
    break;
default :
  logger.error("Unknown SocketIOEvent msg = " + msg);
}
}
}
}
