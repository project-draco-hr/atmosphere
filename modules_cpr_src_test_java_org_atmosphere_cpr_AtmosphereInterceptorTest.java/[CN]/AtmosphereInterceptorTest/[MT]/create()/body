{
  framework=new AtmosphereFramework();
  framework.setAsyncSupport(mock(AsyncSupport.class));
  framework.init(new ServletConfig(){
    @Override public String getServletName(){
      return "void";
    }
    @Override public ServletContext getServletContext(){
      return mock(ServletContext.class);
    }
    @Override public String getInitParameter(    String name){
      return null;
    }
    @Override public Enumeration<String> getInitParameterNames(){
      return null;
    }
  }
);
  config=framework.getAtmosphereConfig();
  processor=new AsynchronousProcessor(config){
    @Override public Action service(    AtmosphereRequest req,    AtmosphereResponse res) throws IOException, ServletException {
      return action(req,res);
    }
  }
;
}
