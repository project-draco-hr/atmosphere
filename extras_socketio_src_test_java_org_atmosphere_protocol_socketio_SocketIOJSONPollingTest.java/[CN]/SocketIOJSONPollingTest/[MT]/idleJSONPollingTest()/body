{
  System.err.println("\n\nTEST idleJSONPollingTest\n\n");
  final AsyncHttpClient client=getAsyncHttpClient(new AsyncHttpClientConfig.Builder().setFollowRedirects(true).build());
  final String sessionid1=getSessionID(client,GET_SESSION_URL);
  connectJSONP("clientJSONPolling1",client,GET_SESSION_URL + "jsonp-polling/" + sessionid1);
  final CountDownLatch l=new CountDownLatch(1);
  suspend("clientJSONPolling1",client,GET_SESSION_URL + "jsonp-polling/" + sessionid1,new ResponseListener(){
    @Override public void notify(    String message){
      l.countDown();
      Assert.assertNotNull(message);
      Assert.assertEquals(message,"io.j[0](\"8::\");");
    }
  }
);
  if (!l.await(30,TimeUnit.SECONDS)) {
    throw new RuntimeException("Timeout out");
  }
  client.close();
}
