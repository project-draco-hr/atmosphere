{
  if (!valid.get())   throw new IllegalStateException();
  return (String[])Collections.list(attributes.keys()).toArray();
}
