{
  if (!event.isResuming() && !event.isResumedOnTimeout() && event.isSuspended()&& isInScope) {
    action.type=AtmosphereServlet.Action.TYPE.RESUME;
    Broadcaster b=getBroadcaster();
    if (b instanceof DefaultBroadcaster) {
      ((DefaultBroadcaster)b).broadcastOnResume(this);
    }
    notifyListeners();
    listeners.clear();
    try {
      broadcaster.removeAtmosphereResource(this);
    }
 catch (    IllegalStateException ex) {
      logger.trace(ex.getMessage(),ex);
    }
    if (BroadcasterFactory.getDefault() != null) {
      BroadcasterFactory.getDefault().removeAllAtmosphereResource(this);
    }
    try {
      req.setAttribute(AtmosphereServlet.RESUMED_ON_TIMEOUT,Boolean.FALSE);
    }
 catch (    Exception ex) {
      logger.debug("Cannot resume an already resumed/cancelled request");
    }
    if (req.getAttribute(PRE_SUSPEND) == null) {
      cometSupport.action(this);
    }
  }
 else {
    logger.debug("Cannot resume an already resumed/cancelled request");
  }
}
