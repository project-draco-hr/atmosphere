{
  Map<String,Object> m=new ConcurrentHashMap<String,Object>();
  m.put(FrameworkConfig.WEBSOCKET_SUBPROTOCOL,FrameworkConfig.SIMPLE_HTTP_OVER_WEBSOCKET);
  for (  Map.Entry<String,Object> e : request.localAttributes().entrySet()) {
    if (e.getKey() != null) {
      m.put(e.getKey(),e.getValue());
    }
  }
  return m;
}
