{
  List<AtmosphereRequest> list=webSocketProtocol.onMessage(webSocket,data,offset,length);
  if (list == null)   return;
  for (  AtmosphereRequest r : list) {
    if (r != null) {
      AtmosphereResponse w=new AtmosphereResponse(webSocket,webSocketProtocol,r);
      try {
        dispatch(r,w);
      }
  finally {
        if (recycleAtmosphereRequestResponse) {
          r.destroy();
          w.destroy();
        }
      }
    }
  }
}
