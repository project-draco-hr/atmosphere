{
  super.action(actionEvent);
  if (actionEvent.isInScope() && actionEvent.action().type == Action.TYPE.RESUME && (config.getInitParameter(AtmosphereServlet.RESUME_AND_KEEPALIVE) == null || config.getInitParameter(AtmosphereServlet.RESUME_AND_KEEPALIVE).equalsIgnoreCase("false"))) {
    Continuation c=ContinuationSupport.getContinuation(actionEvent.getRequest());
    try {
      c.complete();
    }
 catch (    IllegalStateException ex) {
      logger.debug("Continuation.complete() failed",ex);
    }
 finally {
      resumed.offer(c);
    }
  }
 else {
    try {
      actionEvent.getResponse().flushBuffer();
    }
 catch (    IOException e) {
    }
  }
}
