{
  super.action(r);
  if (r.isInScope() && r.action().type == Action.TYPE.RESUME && (config.getInitParameter(ApplicationConfig.RESUME_AND_KEEPALIVE) == null || config.getInitParameter(ApplicationConfig.RESUME_AND_KEEPALIVE).equalsIgnoreCase("false"))) {
    Continuation c=ContinuationSupport.getContinuation(r.getRequest());
    if (c != null) {
      try {
        if (c.isSuspended()) {
          c.complete();
        }
 else {
          r.getRequest().setAttribute(FrameworkConfig.CANCEL_SUSPEND_OPERATION,true);
        }
      }
 catch (      IllegalStateException ex) {
        r.getRequest().setAttribute(FrameworkConfig.CANCEL_SUSPEND_OPERATION,true);
        logger.trace("Continuation.complete() failed",ex);
      }
    }
  }
 else {
    try {
      r.getResponse(false).flushBuffer();
    }
 catch (    IOException e) {
    }
  }
}
