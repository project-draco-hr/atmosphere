{
  HttpServletRequest req=resource.getRequest();
  if (req.getMethod().equals("GET")) {
    resource.suspend(-1,false);
  }
 else {
    if (req.getParameter("stop").equalsIgnoreCase("true")) {
      resource.getBroadcaster().broadcast("");
    }
 else     if (req.getParameter("current_count") != null) {
      Integer i=Integer.valueOf(req.getParameter("current_count"));
      if (i > currentCount.get()) {
        currentCount.set(i);
      }
      resource.getBroadcaster().broadcast(i > currentCount.get() ? i : currentCount.get());
    }
    PrintWriter writer=resource.getResponse().getWriter();
    writer.write("success");
    writer.flush();
  }
}
