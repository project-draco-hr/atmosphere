{
  super.framework().autoDetectAtmosphereHandlers(servletContext,classLoader);
  String realPath=servletContext.getRealPath("WEB-INF/classes");
  if (realPath == null) {
    URL u=servletContext.getResource("WEB-INF/classes");
    if (u == null)     return;
    realPath=u.getPath();
  }
  File f=new File(realPath);
  if (!f.exists()) {
    String ctxPath=servletContext.getContextPath();
    if (System.getProperty("os.name").toLowerCase().startsWith("win")) {
      ctxPath=ctxPath.replace("/","\\");
    }
    int index=realPath.indexOf(ctxPath);
    if (index < 1) {
      index=realPath.length();
    }
    String trailer=realPath.substring(0,index);
    f=new File(trailer + servletContext.getContextPath() + "WEB-INF/classes");
  }
  framework().loadAtmosphereHandlersFromPath(classLoader,realPath);
}
