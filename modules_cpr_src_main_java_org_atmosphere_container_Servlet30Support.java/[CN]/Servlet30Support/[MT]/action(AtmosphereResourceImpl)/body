{
  if (actionEvent.action().type == Action.TYPE.RESUME && actionEvent.isInScope()) {
    AsyncContext asyncContext=(AsyncContext)actionEvent.getRequest().getAttribute("org.atmosphere.container.asyncContext");
    if (asyncContext == null && supportSession()) {
      asyncContext=(AsyncContext)actionEvent.getRequest().getSession().getAttribute("org.atmosphere.container.asyncContext");
    }
    if (asyncContext != null && (config.getInitParameter(AtmosphereServlet.RESUME_AND_KEEPALIVE) == null || config.getInitParameter(AtmosphereServlet.RESUME_AND_KEEPALIVE).equalsIgnoreCase("false"))) {
      asyncContext.complete();
    }
  }
 else {
    if (!actionEvent.isInScope() && logger.isLoggable(Level.FINE)) {
      logger.fine("Already resumed or cancelled " + actionEvent);
    }
  }
}
