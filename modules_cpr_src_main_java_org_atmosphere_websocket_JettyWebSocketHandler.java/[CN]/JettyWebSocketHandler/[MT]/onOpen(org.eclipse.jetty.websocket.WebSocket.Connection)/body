{
  logger.debug("WebSocket.onOpen.");
  try {
    webSocketProcessor=(WebSocketProcessor)JettyWebSocketHandler.class.getClassLoader().loadClass(webSocketProcessorClassName).getDeclaredConstructor(new Class[]{AtmosphereServlet.class,WebSocket.class}).newInstance(new Object[]{atmosphereServlet,new Jetty8WebSocket(connection)});
    webSocketProcessor.dispatch(request);
    webSocketProcessor.notifyListener(new WebSocketEventListener.WebSocketEvent("",CONNECT,webSocketProcessor.webSocketSupport()));
  }
 catch (  Exception e) {
    logger.warn("failed to connect to web socket",e);
  }
}
