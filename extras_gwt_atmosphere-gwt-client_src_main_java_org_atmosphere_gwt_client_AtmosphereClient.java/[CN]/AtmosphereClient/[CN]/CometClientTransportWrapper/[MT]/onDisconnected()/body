{
  heartbeatTimer.cancel();
  connectionTimer.cancel();
  if (transport instanceof WebSocketCometTransport && webSocketSuccessful == false) {
    logger.info("Server does not support WebSockets");
    transport=GWT.create(CometTransport.class);
    transport.initiate(AtmosphereClient.this,this);
    transport.connect(++connectionCount);
  }
 else {
    doOnDisconnected(this);
  }
}
