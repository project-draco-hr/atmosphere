{
  RequestBuilder request=new RequestBuilder(RequestBuilder.POST,serviceUrl());
  try {
    logger.fine("Sending message to server: " + message);
    request.sendRequest(message,new RequestCallback(){
      @Override public void onResponseReceived(      Request request,      Response response){
        if (response.getStatusCode() != Response.SC_OK && response.getStatusCode() != 0) {
          logger.log(Level.SEVERE,"Failed to send server message: [" + response.getStatusText() + ","+ response.getStatusCode()+ "]");
          callback.onFailure(new StatusCodeException(response.getStatusCode(),response.getStatusText()));
        }
 else {
          callback.onSuccess(null);
        }
      }
      @Override public void onError(      Request request,      Throwable exception){
        callback.onFailure(exception);
      }
    }
);
  }
 catch (  RequestException ex) {
    callback.onFailure(ex);
  }
}
