{
  if (followee == null) {
    logger.error("Message cannot be null");
    throw new WebApplicationException(400);
  }
  if (name == null) {
    logger.error("Name cannot be null");
    throw new WebApplicationException(400);
  }
  UserStateData followeeData=us.get(followee);
  TwitterBroadcaster outsiderBroadcaster=followeeData.bc;
  if (outsiderBroadcaster == null) {
    String m=(BEGIN_SCRIPT_TAG + toJsonp("Invalid Twitter user ",followee) + END_SCRIPT_TAG);
    Broadcastable b=new Broadcastable(m,userBc);
    return b;
  }
  outsiderBroadcaster.broadcast(BEGIN_SCRIPT_TAG + toJsonp(name," is now following " + followee) + END_SCRIPT_TAG);
  outsiderBroadcaster.addAtmosphereResource(userBc.getUserAtmosphereEvent().getResource());
  String m=(BEGIN_SCRIPT_TAG + toJsonp("You are now following ",followee) + END_SCRIPT_TAG);
  Broadcastable b=new Broadcastable(m,userBc);
  return b;
}
