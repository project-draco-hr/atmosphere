{
  boolean webSocketEnabled=false;
  if (servletReq.getHeaders("Connection") != null && servletReq.getHeaders("Connection").hasMoreElements()) {
    String[] e=((Enumeration<String>)servletReq.getHeaders("Connection")).nextElement().split(",");
    for (    String upgrade : e) {
      if (upgrade.trim().equalsIgnoreCase(WEBSOCKET_UPGRADE)) {
        webSocketEnabled=true;
        break;
      }
    }
  }
  String transport=request.getHeaderValue(X_ATMOSPHERE_TRANSPORT);
  if (webSocketEnabled) {
    return false;
  }
 else   if (transport != null && (transport.equals(JSONP) || transport.equals(LONG_POLLING_TRANSPORT))) {
    return false;
  }
  return outputJunk;
}
