{
  super(b.request);
  pathInfo=b.pathInfo == "" ? b.request.getPathInfo() : b.pathInfo;
  headers=b.headers == null ? new HashMap<String,String>() : b.headers;
  queryStrings=b.queryStrings == null ? new HashMap<String,String[]>() : b.queryStrings;
  session=b.request == null ? new FakeHttpSession("",null,System.currentTimeMillis()) : b.request.getSession();
  if (b.inputStream == null) {
    if (b.dataBytes != null) {
      bis=new ByteInputStream(b.dataBytes,b.offset,b.length);
      try {
        br=new BufferedReader(new StringReader(new String(b.dataBytes,b.offset,b.length,b.encoding)));
      }
 catch (      UnsupportedEncodingException e) {
        throw new RuntimeException(e);
      }
    }
 else     if (b.data != null) {
      bis=new ByteInputStream(b.data.getBytes(),0,b.data.getBytes().length);
      br=new BufferedReader(new StringReader(b.data));
    }
 else {
      bis=null;
      br=null;
    }
  }
 else {
    bis=new IS(b.inputStream);
    br=new BufferedReader(new InputStreamReader(b.inputStream));
  }
  methodType=b.methodType == null ? (b.request != null ? b.request.getMethod() : "GET") : b.methodType;
  contentType=b.contentType == null ? (b.request != null ? b.request.getContentType() : "text/plain") : b.contentType;
  this.b=b;
}
