{
  try {
    AtmosphereHandlerService a=discoveredClass.getAnnotation(AtmosphereHandlerService.class);
    atmosphereConfig(a.atmosphereConfig(),framework);
    framework.setDefaultBroadcasterClassName(a.broadcaster().getName());
    filters(a.broadcastFilters(),framework);
    Class<?>[] interceptors=a.interceptors();
    List<AtmosphereInterceptor> l=new ArrayList<AtmosphereInterceptor>();
    for (    Class i : interceptors) {
      try {
        AtmosphereInterceptor ai=(AtmosphereInterceptor)i.newInstance();
        l.add(ai);
      }
 catch (      Throwable e) {
        logger.warn("",e);
      }
    }
    if (a.path().contains("{")) {
      l.add(new AtmosphereHandlerServiceInterceptor());
    }
    AtmosphereInterceptor aa=listeners(a.listeners(),framework);
    if (aa != null) {
      l.add(aa);
    }
    framework.sessionSupport(a.supportSession());
    AtmosphereHandler handler=(AtmosphereHandler)discoveredClass.newInstance();
    for (    String s : a.properties()) {
      String[] nv=s.split("=");
      IntrospectionUtils.setProperty(handler,nv[0],nv[1]);
      IntrospectionUtils.addProperty(handler,nv[0],nv[1]);
    }
    framework.addAtmosphereHandler(a.path(),handler,l);
    framework.setBroadcasterCacheClassName(a.broadcasterCache().getName());
  }
 catch (  Throwable e) {
    logger.warn("",e);
  }
}
