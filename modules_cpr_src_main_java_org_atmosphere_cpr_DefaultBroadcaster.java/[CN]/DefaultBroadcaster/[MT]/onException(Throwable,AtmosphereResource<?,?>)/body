{
  logger.debug("onException()",t);
  if (r instanceof AtmosphereEventLifecycle) {
    ((AtmosphereEventLifecycle)r).notifyListeners(new AtmosphereResourceEventImpl((AtmosphereResourceImpl)r,true,false,t));
    ((AtmosphereEventLifecycle)r).removeEventListeners();
  }
  bc.getAsyncWriteService().execute(new Runnable(){
    @Override public void run(){
      r.resume();
    }
  }
);
}
