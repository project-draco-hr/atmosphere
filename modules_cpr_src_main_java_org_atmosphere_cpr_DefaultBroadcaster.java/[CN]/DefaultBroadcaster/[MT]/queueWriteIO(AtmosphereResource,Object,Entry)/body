{
  if (!bc.getBroadcasterCache().getClass().equals(BroadcasterConfig.DefaultBroadcasterCache.class.getName())) {
    if (r.isResumed() || r.isCancelled()) {
      BroadcasterCache broadcasterCache=bc.getBroadcasterCache();
      if (!EventCacheBroadcasterCache.class.isAssignableFrom(broadcasterCache.getClass())) {
        trackBroadcastMessage(r,cacheStrategy == BroadcasterCache.STRATEGY.AFTER_FILTER ? finalMsg : entry.originalMessage);
      }
    }
 else {
      asyncWriteQueue.put(new AsyncWriteToken(r,finalMsg,entry.future,entry.originalMessage,entry.cache));
    }
  }
 else {
    asyncWriteQueue.put(new AsyncWriteToken(r,finalMsg,entry.future,entry.originalMessage,entry.cache));
  }
}
