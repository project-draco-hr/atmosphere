{
  if (destroyed.get()) {
    logger.debug(DESTROYED,getID());
    return r;
  }
synchronized (resources) {
    if (!resources.contains(r)) {
      return null;
    }
    resources.remove(r);
    if (resources.isEmpty()) {
      notifyEmptyListener();
      if (scope != SCOPE.REQUEST && lifeCyclePolicy.getLifeCyclePolicy() == BroadcasterLifeCyclePolicy.ATMOSPHERE_RESOURCE_POLICY.EMPTY) {
        releaseExternalResources();
      }
 else       if (lifeCyclePolicy.getLifeCyclePolicy() == BroadcasterLifeCyclePolicy.ATMOSPHERE_RESOURCE_POLICY.EMPTY_DESTROY) {
        notifyDestroyListener();
        BroadcasterFactory.getDefault().remove(this,name);
        destroy();
      }
    }
  }
  return r;
}
