{
  CometSupport cs=null;
  if (!useWebsocketIfPossible) {
    cs=resolve(useNativeIfPossible,defaultToBlocking);
  }
 else {
    cs=resolveWebSocket(detectWebSocketPresent());
  }
  if (cs == null) {
    return new BlockingIOCometSupport(config);
  }
 else {
    return cs;
  }
}
