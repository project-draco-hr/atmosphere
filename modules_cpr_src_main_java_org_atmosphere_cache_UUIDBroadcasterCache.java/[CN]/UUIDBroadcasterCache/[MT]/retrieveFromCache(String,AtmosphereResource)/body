{
  String clientId=uuid(r);
  List<Object> result=new ArrayList<Object>();
  ClientQueue clientQueue;
  cacheCandidate(broadcasterId,clientId);
  clientQueue=messages.remove(clientId);
  ConcurrentLinkedQueue<CacheMessage> clientMessages;
  if (clientQueue != null) {
    clientMessages=clientQueue.getQueue();
    for (    CacheMessage cacheMessage : clientMessages) {
      result.add(cacheMessage.getMessage());
    }
  }
  if (logger.isTraceEnabled()) {
    logger.trace("Retrieved for AtmosphereResource {} cached messages {}",r.uuid(),result);
    logger.trace("Available cached message {}",messages);
  }
  return result;
}
