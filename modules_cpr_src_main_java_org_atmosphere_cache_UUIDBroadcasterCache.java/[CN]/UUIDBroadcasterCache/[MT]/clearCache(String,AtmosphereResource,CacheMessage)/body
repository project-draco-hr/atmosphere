{
  if (message == null) {
    AtmosphereResourceEvent e=r.getAtmosphereResourceEvent();
    logger.trace("Cached message is null for {}, but event was {}",r.uuid(),e == null ? "null" : e.getMessage());
    return;
  }
  String clientId=uuid(r);
  ClientQueue clientQueue;
synchronized (messages) {
    clientQueue=messages.get(clientId);
    if (clientQueue != null) {
      logger.trace("Removing for AtmosphereResource {} cached message {}",r.uuid(),message.getMessage());
      clientQueue.getQueue().remove(message);
    }
  }
}
