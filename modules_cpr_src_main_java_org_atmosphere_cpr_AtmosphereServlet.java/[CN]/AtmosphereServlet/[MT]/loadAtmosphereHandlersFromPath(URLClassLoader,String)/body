{
  File file=new File(realPath);
  if (file.isDirectory()) {
    getFiles(file);
    for (    String className : possibleAtmosphereHandlersCandidate) {
      try {
        className=className.replace('\\','/');
        className=className.substring(className.indexOf(WEB_INF_CLASSES) + WEB_INF_CLASSES.length(),className.lastIndexOf(".")).replace('/','.');
        Class<?> clazz=classloader.loadClass(className);
        if (AtmosphereHandler.class.isAssignableFrom(clazz)) {
          AtmosphereHandler handler=(AtmosphereHandler)clazz.newInstance();
          InjectorProvider.getInjector().inject(handler);
          atmosphereHandlers.put("/" + handler.getClass().getSimpleName(),new AtmosphereHandlerWrapper(handler,null));
          logger.info("Successfully loaded handler: {}  mapped to context-path: {}",handler,handler.getClass().getSimpleName());
        }
      }
 catch (      Throwable t) {
        logger.warn("failed to load class as an AtmosphereHandler: " + className,t);
      }
    }
  }
}
