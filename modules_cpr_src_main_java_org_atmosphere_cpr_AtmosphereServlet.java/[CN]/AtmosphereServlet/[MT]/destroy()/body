{
  if (AsynchronousProcessor.class.isAssignableFrom(cometSupport.getClass())) {
    ((AsynchronousProcessor)cometSupport).shutdown();
  }
  AtmosphereHandler a;
  for (  Entry<String,AtmosphereHandlerWrapper> h : atmosphereHandlers.entrySet()) {
    a=h.getValue().atmosphereHandler;
    if (a instanceof AtmosphereServletProcessor) {
      ((AtmosphereServletProcessor)a).destroy();
    }
    h.getValue().broadcaster.destroy();
  }
  BroadcasterFactory.factory=null;
  BroadcasterFactory.getDefault().destroy();
  broadcasterConfig=new BroadcasterConfig();
}
