{
  super(config);
  String[] jettyVersion=config.getServletContext().getServerInfo().substring(6).split("\\.");
  WebSocketFactory wsf;
  try {
    if (Integer.valueOf(jettyVersion[0]) > 7 || Integer.valueOf(jettyVersion[0]) == 7 && Integer.valueOf(jettyVersion[1]) > 4) {
      wsf=JettyWebSocketUtil.getFactory(config);
    }
 else {
      wsf=null;
    }
  }
 catch (  Throwable e) {
    logger.trace("Unable to parse Jetty version {}",config.getServletContext().getServerInfo());
    wsf=JettyWebSocketUtil.getFactory(config);
  }
  webSocketFactory=wsf;
}
