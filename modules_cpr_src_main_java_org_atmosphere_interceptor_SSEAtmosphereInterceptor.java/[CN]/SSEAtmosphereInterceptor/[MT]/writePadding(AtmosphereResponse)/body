{
  if (response.request() != null && response.request().getAttribute("paddingWritten") != null)   return false;
  response.setContentType(contentType);
  response.setCharacterEncoding("utf-8");
  boolean isUsingStream=(Boolean)response.request().getAttribute(PROPERTY_USE_STREAM);
  if (isUsingStream) {
    OutputStream stream=null;
    try {
      stream=response.getResponse().getOutputStream();
    }
 catch (    IOException e) {
      logger.trace("",e);
    }
    try {
      stream.write(padding);
      stream.flush();
    }
 catch (    IOException ex) {
      logger.warn("SSE may not work",ex);
    }
  }
 else {
    PrintWriter w=null;
    try {
      w=response.getResponse().getWriter();
    }
 catch (    IOException e) {
      logger.trace("",e);
    }
    w.println(paddingText);
    w.flush();
  }
  response.resource().getRequest().setAttribute("paddingWritten","true");
  return true;
}
