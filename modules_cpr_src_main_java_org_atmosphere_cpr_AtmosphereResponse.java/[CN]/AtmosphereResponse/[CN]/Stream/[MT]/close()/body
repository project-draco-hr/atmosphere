{
  if (!validFlushOrClose() || asyncIOWriter instanceof KeepOpenStreamAware)   return;
  boolean b=forceAsyncIOWriter;
  forceAsyncIOWriter=false;
  try {
    asyncIOWriter.close(AtmosphereResponse.this);
  }
 catch (  IOException e) {
    handleException(e);
    throw e;
  }
 finally {
    forceAsyncIOWriter=b;
  }
}
