{
  collect();
  int length=arguments.length();
  List messages=new ArrayList<Serializable>(length);
  for (int i=0; i < length; i++) {
    String message=arguments.get(i);
switch (message.charAt(0)) {
case ']':
      messages.add(message.substring(1));
    break;
case '[':
case 'R':
case 'r':
case 'f':
  try {
    messages.add(parse(message));
  }
 catch (  SerializationException e) {
    listener.onError(e,true);
  }
break;
default :
listener.onError(new AtmosphereClientException("Invalid message received: " + message),true);
}
}
listener.onMessage(messages);
}
