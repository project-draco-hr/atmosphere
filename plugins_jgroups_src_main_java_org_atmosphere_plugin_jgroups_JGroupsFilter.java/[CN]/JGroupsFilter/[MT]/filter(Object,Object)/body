{
  if (o instanceof String) {
    String message=(String)o;
    if (!receivedMessages.remove(message)) {
      try {
        jchannel.send(new Message(null,null,message));
      }
 catch (      ChannelException e) {
        logger.warn("failed to send message",e);
      }
    }
    return new BroadcastAction(message);
  }
 else {
    return new BroadcastAction(o);
  }
}
