{
  try {
    ReflectorServletProcessor r=new ReflectorServletProcessor();
    r.setServletClassName(annotatedClass.getName());
    List<AtmosphereInterceptor> l=new ArrayList<AtmosphereInterceptor>();
    Class<Servlet> s=(Class<Servlet>)annotatedClass;
    MeteorService m=s.getAnnotation(MeteorService.class);
    String mapping=m.path();
    atmosphereConfig(m.atmosphereConfig(),framework);
    filters(m.broadcastFilters(),framework);
    AtmosphereInterceptor aa=listeners(m.listeners(),framework);
    if (aa != null) {
      l.add(aa);
    }
    Class<?>[] interceptors=m.interceptors();
    for (    Class i : interceptors) {
      try {
        AtmosphereInterceptor ai=(AtmosphereInterceptor)framework.newClassInstance(i);
        l.add(ai);
      }
 catch (      Throwable e) {
        logger.warn("",e);
      }
    }
    if (m.path().contains("{")) {
      framework.interceptors().add(new MeteorServiceInterceptor());
    }
    framework.addAtmosphereHandler(mapping,r,framework.getBroadcasterFactory().lookup(m.broadcaster(),true),l);
    framework.setBroadcasterCacheClassName(m.broadcasterCache().getName());
  }
 catch (  Throwable e) {
    logger.warn("",e);
  }
}
