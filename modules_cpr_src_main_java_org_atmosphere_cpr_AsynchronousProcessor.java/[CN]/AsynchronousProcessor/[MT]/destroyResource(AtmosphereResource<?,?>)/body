{
  if (r == null)   return;
  r.removeEventListeners();
  try {
    AtmosphereResourceImpl.class.cast(r).getBroadcaster(false).removeAtmosphereResource(r);
  }
 catch (  IllegalStateException ex) {
    logger.trace(ex.getMessage(),ex);
  }
  if (BroadcasterFactory.getDefault() != null) {
    BroadcasterFactory.getDefault().removeAllAtmosphereResource(r);
  }
}
