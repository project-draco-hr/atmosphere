{
  r.removeEventListeners();
  try {
    r.getBroadcaster().removeAtmosphereResource(r);
  }
 catch (  IllegalStateException ex) {
    logger.trace(ex.getMessage(),ex);
  }
  if (BroadcasterFactory.getDefault() != null) {
    BroadcasterFactory.getDefault().removeAllAtmosphereResource(r);
  }
}
