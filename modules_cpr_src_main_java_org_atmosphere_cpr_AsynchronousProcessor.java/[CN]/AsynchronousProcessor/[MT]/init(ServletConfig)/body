{
  String maxInactive=sc.getInitParameter(MAX_INACTIVE) != null ? sc.getInitParameter(MAX_INACTIVE) : config.getInitParameter(MAX_INACTIVE);
  if (maxInactive != null) {
    final long maxInactiveTime=Long.parseLong(maxInactive);
    if (maxInactiveTime <= 0)     return;
    closedDetector.scheduleAtFixedRate(new Runnable(){
      public void run(){
        for (        HttpServletRequest req : aliveRequests.keySet()) {
          long l=(Long)req.getAttribute(MAX_INACTIVE);
          if (l > 0 && System.currentTimeMillis() - l > maxInactiveTime) {
            try {
              cancelled(req,aliveRequests.get(req).getResponse());
              req.setAttribute(MAX_INACTIVE,(long)-1);
            }
 catch (            IOException e) {
              logger.trace("closedDetector",e);
            }
catch (            ServletException e) {
              logger.trace("closedDetector",e);
            }
          }
        }
      }
    }
,0,1,TimeUnit.SECONDS);
  }
}
