{
  logger.debug("onDisconnect from sessionid = " + outbound.getSessionId() + " username="+ loggedUserMap.get(outbound.getSessionId()));
  String sessionid=outbound.getSessionId();
  String username=loggedUserMap.get(sessionid);
  broadcaster.broadcast("{\"name\":\"announcement\",\"args\":[\"" + username + " disconnected\"]}",r);
  loggedUserMap.remove(sessionid);
  ObjectMapper mapper=new ObjectMapper();
  ChatJSONObject out=new ChatJSONObject();
  out.setName(ChatJSONObject.USERCONNECTEDLIST);
  List list=new ArrayList();
  list.add(loggedUserMap);
  out.setArgs(list);
  try {
    broadcaster.broadcast(new SocketIOPacketImpl(PacketType.EVENT,mapper.writeValueAsString(out),false).toString(),r);
  }
 catch (  Exception e) {
    logger.error("",e);
  }
}
