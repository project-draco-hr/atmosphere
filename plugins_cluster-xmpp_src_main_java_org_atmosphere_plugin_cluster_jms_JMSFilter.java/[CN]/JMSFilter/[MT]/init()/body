{
  try {
    Context ctx=new InitialContext();
    ConnectionFactory connectionFactory=(ConnectionFactory)ctx.lookup("jms/atmosphereFactory");
    Topic topic=(Topic)ctx.lookup("jms/" + clusterName);
    connection=connectionFactory.createConnection();
    session=connection.createSession(false,Session.AUTO_ACKNOWLEDGE);
    consumer=session.createConsumer(topic,clusterName);
    consumer.setMessageListener(this);
    publisher=session.createProducer(topic);
    connection.start();
  }
 catch (  Throwable ex) {
    throw new IllegalStateException("Unable to initialize JMSFilter",ex);
  }
}
