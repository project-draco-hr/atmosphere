{
  ByteArrayOutputStream b=new ByteArrayOutputStream();
  final WebSocket w=new ArrayBaseWebSocket(b);
  final WebSocketProcessor processor=WebSocketProcessorFactory.getDefault().getWebSocketProcessor(framework);
  processor.registerWebSocketHandler("/a",new EchoHandler());
  AtmosphereRequest request=new AtmosphereRequest.Builder().destroyable(false).body("yoComet").pathInfo("/abcd").build();
  try {
    processor.open(w,request,AtmosphereResponse.newInstance(framework.getAtmosphereConfig(),request,w));
    fail();
  }
 catch (  Exception ex) {
    assertEquals(ex.getClass(),AtmosphereMappingException.class);
  }
}
