{
  if (event.isResuming())   return;
  AtmosphereResourceImpl r=AtmosphereResourceImpl.class.cast(event.getResource());
  Boolean resumeOnBroadcast=r.resumeOnBroadcast();
  if (!resumeOnBroadcast) {
    Object o=r.getRequest(false).getAttribute(ApplicationConfig.RESUME_ON_BROADCAST);
    if (o != null && Boolean.class.isAssignableFrom(o.getClass())) {
      resumeOnBroadcast=Boolean.class.cast(o);
    }
  }
  if (resumeOnBroadcast != null && resumeOnBroadcast) {
    r.resume();
  }
}
