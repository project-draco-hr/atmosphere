{
  try {
    TextMessage textMessage=(TextMessage)msg;
    String message=textMessage.getText();
    receivedMessages.offer(message);
    if (message != null && bc != null) {
      bc.broadcast(message);
    }
  }
 catch (  JMSException ex) {
    logger.warn("failed to broadcast message",ex);
  }
}
